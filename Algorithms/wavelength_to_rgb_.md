# Wavelength to RGB

Functions to convert a wavelength in nm (Nanometer) to R, G and B values.

## C++/Arduino/ESP32

The code below outputs CSV data for wavelengths in the visible range from 380nm to 780nm and their approximate RGB values.

The algorithm takes into account the special sensitivity of the human eye and corrects the value based on wavelength and subjective eye sensitivity.

The method used is a rough approximation and does not take into account the specific correction factor per wavelength.

```c++
void setup() {
  Serial.begin(115200);
  
  float gamma = 0.8;
  float max_intensity = 255;
  // put your main code here, to run repeatedly:
  for (int nm = 380; nm <= 780; nm++) 
  {
    //  derived from http://www.physics.sfasu.edu/astro/color/spectra.html
    
    float factor = 0;
    float R = 0;
    float G = 0;
    float B = 0;

    if (nm>=380.0 && nm< 440.0)
    {
      R = ((nm - 440.0)*-1.0) / 60.0;
      G = 0.0;
      B = 1.0;
    }
    else if (nm < 490.0)
    {
      R = 0.0;
      G = (nm - 440.0) / 50.0;
      B = 1.0;
    }
    else if (nm < 510.0)
    {
      R = 0.0;
      G = 1.0;
      B = ((nm - 510)*-1.0) / 20.0;
    }
    else if (nm < 580.0)
    {
      R = (nm - 510.0) / 70.0;
      G = 1.0;
      B = 0.0;
    }
    else if (nm < 645.0)
    {
      R = 1.0;
      G = ((nm - 645.0)*-1.0) / 65;
      B = 0.0;
    }
    else if (nm <= 780.0)
    {
      R = 1.0;
      G = 0.0;
      B = 0.0;
    }

    if (nm >= 380.0 && nm < 420.0)
    {
      factor = 0.3 + 0.7 * (nm - 380.0) / 40.0;
    }
    else if (nm <= 700.0)
    {
      factor = 1.0;
    }
    else if (nm <= 780.0)
    {
      factor = 0.3 + 0.7 * (780 - nm) / 80.0;
    }

    if (R > 0)
    {
      R = round(max_intensity * pow((R * factor),gamma));
    }
    
    if (G > 0)
    {
      G = round(max_intensity * pow((G * factor),gamma));
    }

    if (B > 0)
    {
      B = round(max_intensity * pow((B * factor),gamma));
    }

    Serial.print(nm);
    Serial.print(",");
    Serial.print((int)R);
    Serial.print(",");
    Serial.print((int)G);
    Serial.print(",");
    Serial.println((int)B);    
  }
}

void loop() {
  
}
```

## PowerShell

For easy testing, here is the same function written in *PowerShell* which is available on all Windows PCs and available via free download for other platforms including *Linux* and *MacOS*:

```powershell
function Convert-WavelengthToRgb
{
    # derived from http://www.physics.sfasu.edu/astro/color/spectra.html

    param
    (
        [Parameter(Mandatory,ValueFromPipeline,ValueFromPipelineByPropertyName)]
        [ValidateRange(380,780)]
        [int]
        $Wavelength
    )

    process
    {
        #from: https://www.codedrome.com/exploring-the-visible-spectrum-in-python/
		$gamma = 0.8
		$maxIntensity = 255
		$factor = 0

        $result = [PSCustomObject]@{
            Wavelength = $Wavelength
            R = 0
            G = 0
            B = 0
        }

        switch($Wavelength)
        {

            { $_ -lt 420 }  {   
                                $result.R = -($_ - 440) / 60
                                $result.B = 1
                                $factor = 0.3 + 0.7 * ($_ - 380) / 40
                                break
                            }

            { $_ -lt 440 }  { 
                                $result.R = -($_ - 440) / 60
                                $result.B = 1
                                $factor = 1
                                break
                            }

            { $_ -lt 490 }  { 
                                $result.G = ($_ - 440) / 50
                                $result.B = 1
                                $factor = 1
                                break
                            }

            { $_ -lt 510 }  { 
                                $result.B = -($_ - 510) / 20
                                $result.G = 1
                                $factor = 1
                                break
                            }

            { $_ -lt 580 }  { 
                                $result.R = ($_ - 510) / 70
                                $result.G = 1
                                $factor = 1
                                break
                            }

            { $_ -lt 645 }  { 
                                $result.G = -($_ - 645) / 65
                                $result.R = 1
                                $factor = 1
                                break
                            }
            { $_ -le 700    }  { 
                                $result.R = 1
                                $factor = 1
                                break
                            }


            { $_ -le 780 }  { 
                                $result.R = 1
                                $factor = 0.3 + 0.7 * (780 - $_) / 80
                                break
                            }
        }
    
        $result.R = [Math]::Pow( ($result.R * $factor), $gamma)	* $maxIntensity -as [int]
        $result.G = [Math]::Pow( ($result.G * $factor), $gamma)	* $maxIntensity -as [int]
        $result.B = [Math]::Pow( ($result.B * $factor), $gamma)	* $maxIntensity -as [int]

        return $result
    }
}

380..780 | Convert-WavelengthToRgb | Out-GridView -Title 'Wavelength to RGB'
```

## Data Table

Both functions create the same RGB values:


| Wavelength (nm) | R | G | B | Hex |
|:---------:|:---:|:---:|:---:|:---:|
|380|97|0|97|`#610061`|
|381|100|0|102|`#640066`|
|382|103|0|106|`#67006A`|
|383|106|0|111|`#6A006F`|
|384|109|0|115|`#6D0073`|
|385|111|0|119|`#6F0077`|
|386|114|0|124|`#72007C`|
|387|116|0|128|`#740080`|
|388|118|0|132|`#760084`|
|389|120|0|136|`#780088`|
|390|121|0|141|`#79008D`|
|391|123|0|145|`#7B0091`|
|392|124|0|149|`#7C0095`|
|393|126|0|153|`#7E0099`|
|394|127|0|157|`#7F009D`|
|395|128|0|161|`#8000A1`|
|396|129|0|165|`#8100A5`|
|397|129|0|169|`#8100A9`|
|398|130|0|173|`#8200AD`|
|399|130|0|177|`#8200B1`|
|400|131|0|181|`#8300B5`|
|401|131|0|185|`#8300B9`|
|402|131|0|188|`#8300BC`|
|403|131|0|192|`#8300C0`|
|404|130|0|196|`#8200C4`|
|405|130|0|200|`#8200C8`|
|406|129|0|204|`#8100CC`|
|407|129|0|207|`#8100CF`|
|408|128|0|211|`#8000D3`|
|409|127|0|215|`#7F00D7`|
|410|126|0|219|`#7E00DB`|
|411|124|0|222|`#7C00DE`|
|412|123|0|226|`#7B00E2`|
|413|121|0|230|`#7900E6`|
|414|120|0|233|`#7800E9`|
|415|118|0|237|`#7600ED`|
|416|116|0|241|`#7400F1`|
|417|113|0|244|`#7100F4`|
|418|111|0|248|`#6F00F8`|
|419|109|0|251|`#6D00FB`|
|420|106|0|255|`#6A00FF`|
|421|102|0|255|`#6600FF`|
|422|97|0|255|`#6100FF`|
|423|93|0|255|`#5D00FF`|
|424|89|0|255|`#5900FF`|
|425|84|0|255|`#5400FF`|
|426|80|0|255|`#5000FF`|
|427|75|0|255|`#4B00FF`|
|428|70|0|255|`#4600FF`|
|429|66|0|255|`#4200FF`|
|430|61|0|255|`#3D00FF`|
|431|56|0|255|`#3800FF`|
|432|51|0|255|`#3300FF`|
|433|46|0|255|`#2E00FF`|
|434|40|0|255|`#2800FF`|
|435|35|0|255|`#2300FF`|
|436|29|0|255|`#1D00FF`|
|437|23|0|255|`#1700FF`|
|438|17|0|255|`#1100FF`|
|439|10|0|255|`#0A00FF`|
|440|0|0|255|`#0000FF`|
|441|0|11|255|`#000BFF`|
|442|0|19|255|`#0013FF`|
|443|0|27|255|`#001BFF`|
|444|0|34|255|`#0022FF`|
|445|0|40|255|`#0028FF`|
|446|0|47|255|`#002FFF`|
|447|0|53|255|`#0035FF`|
|448|0|59|255|`#003BFF`|
|449|0|65|255|`#0041FF`|
|450|0|70|255|`#0046FF`|
|451|0|76|255|`#004CFF`|
|452|0|81|255|`#0051FF`|
|453|0|87|255|`#0057FF`|
|454|0|92|255|`#005CFF`|
|455|0|97|255|`#0061FF`|
|456|0|102|255|`#0066FF`|
|457|0|108|255|`#006CFF`|
|458|0|113|255|`#0071FF`|
|459|0|118|255|`#0076FF`|
|460|0|123|255|`#007BFF`|
|461|0|127|255|`#007FFF`|
|462|0|132|255|`#0084FF`|
|463|0|137|255|`#0089FF`|
|464|0|142|255|`#008EFF`|
|465|0|146|255|`#0092FF`|
|466|0|151|255|`#0097FF`|
|467|0|156|255|`#009CFF`|
|468|0|160|255|`#00A0FF`|
|469|0|165|255|`#00A5FF`|
|470|0|169|255|`#00A9FF`|
|471|0|174|255|`#00AEFF`|
|472|0|178|255|`#00B2FF`|
|473|0|183|255|`#00B7FF`|
|474|0|187|255|`#00BBFF`|
|475|0|192|255|`#00C0FF`|
|476|0|196|255|`#00C4FF`|
|477|0|200|255|`#00C8FF`|
|478|0|205|255|`#00CDFF`|
|479|0|209|255|`#00D1FF`|
|480|0|213|255|`#00D5FF`|
|481|0|218|255|`#00DAFF`|
|482|0|222|255|`#00DEFF`|
|483|0|226|255|`#00E2FF`|
|484|0|230|255|`#00E6FF`|
|485|0|234|255|`#00EAFF`|
|486|0|239|255|`#00EFFF`|
|487|0|243|255|`#00F3FF`|
|488|0|247|255|`#00F7FF`|
|489|0|251|255|`#00FBFF`|
|490|0|255|255|`#00FFFF`|
|491|0|255|245|`#00FFF5`|
|492|0|255|234|`#00FFEA`|
|493|0|255|224|`#00FFE0`|
|494|0|255|213|`#00FFD5`|
|495|0|255|203|`#00FFCB`|
|496|0|255|192|`#00FFC0`|
|497|0|255|181|`#00FFB5`|
|498|0|255|169|`#00FFA9`|
|499|0|255|158|`#00FF9E`|
|500|0|255|146|`#00FF92`|
|501|0|255|135|`#00FF87`|
|502|0|255|123|`#00FF7B`|
|503|0|255|110|`#00FF6E`|
|504|0|255|97|`#00FF61`|
|505|0|255|84|`#00FF54`|
|506|0|255|70|`#00FF46`|
|507|0|255|56|`#00FF38`|
|508|0|255|40|`#00FF28`|
|509|0|255|23|`#00FF17`|
|510|0|255|0|`#00FF00`|
|511|9|255|0|`#09FF00`|
|512|15|255|0|`#0FFF00`|
|513|21|255|0|`#15FF00`|
|514|26|255|0|`#1AFF00`|
|515|31|255|0|`#1FFF00`|
|516|36|255|0|`#24FF00`|
|517|40|255|0|`#28FF00`|
|518|45|255|0|`#2DFF00`|
|519|49|255|0|`#31FF00`|
|520|54|255|0|`#36FF00`|
|521|58|255|0|`#3AFF00`|
|522|62|255|0|`#3EFF00`|
|523|66|255|0|`#42FF00`|
|524|70|255|0|`#46FF00`|
|525|74|255|0|`#4AFF00`|
|526|78|255|0|`#4EFF00`|
|527|82|255|0|`#52FF00`|
|528|86|255|0|`#56FF00`|
|529|90|255|0|`#5AFF00`|
|530|94|255|0|`#5EFF00`|
|531|97|255|0|`#61FF00`|
|532|101|255|0|`#65FF00`|
|533|105|255|0|`#69FF00`|
|534|108|255|0|`#6CFF00`|
|535|112|255|0|`#70FF00`|
|536|115|255|0|`#73FF00`|
|537|119|255|0|`#77FF00`|
|538|123|255|0|`#7BFF00`|
|539|126|255|0|`#7EFF00`|
|540|129|255|0|`#81FF00`|
|541|133|255|0|`#85FF00`|
|542|136|255|0|`#88FF00`|
|543|140|255|0|`#8CFF00`|
|544|143|255|0|`#8FFF00`|
|545|146|255|0|`#92FF00`|
|546|150|255|0|`#96FF00`|
|547|153|255|0|`#99FF00`|
|548|156|255|0|`#9CFF00`|
|549|160|255|0|`#A0FF00`|
|550|163|255|0|`#A3FF00`|
|551|166|255|0|`#A6FF00`|
|552|169|255|0|`#A9FF00`|
|553|173|255|0|`#ADFF00`|
|554|176|255|0|`#B0FF00`|
|555|179|255|0|`#B3FF00`|
|556|182|255|0|`#B6FF00`|
|557|185|255|0|`#B9FF00`|
|558|189|255|0|`#BDFF00`|
|559|192|255|0|`#C0FF00`|
|560|195|255|0|`#C3FF00`|
|561|198|255|0|`#C6FF00`|
|562|201|255|0|`#C9FF00`|
|563|204|255|0|`#CCFF00`|
|564|207|255|0|`#CFFF00`|
|565|210|255|0|`#D2FF00`|
|566|213|255|0|`#D5FF00`|
|567|216|255|0|`#D8FF00`|
|568|219|255|0|`#DBFF00`|
|569|222|255|0|`#DEFF00`|
|570|225|255|0|`#E1FF00`|
|571|228|255|0|`#E4FF00`|
|572|231|255|0|`#E7FF00`|
|573|234|255|0|`#EAFF00`|
|574|237|255|0|`#EDFF00`|
|575|240|255|0|`#F0FF00`|
|576|243|255|0|`#F3FF00`|
|577|246|255|0|`#F6FF00`|
|578|249|255|0|`#F9FF00`|
|579|252|255|0|`#FCFF00`|
|580|255|255|0|`#FFFF00`|
|581|255|252|0|`#FFFC00`|
|582|255|249|0|`#FFF900`|
|583|255|246|0|`#FFF600`|
|584|255|242|0|`#FFF200`|
|585|255|239|0|`#FFEF00`|
|586|255|236|0|`#FFEC00`|
|587|255|233|0|`#FFE900`|
|588|255|230|0|`#FFE600`|
|589|255|226|0|`#FFE200`|
|590|255|223|0|`#FFDF00`|
|591|255|220|0|`#FFDC00`|
|592|255|217|0|`#FFD900`|
|593|255|213|0|`#FFD500`|
|594|255|210|0|`#FFD200`|
|595|255|207|0|`#FFCF00`|
|596|255|203|0|`#FFCB00`|
|597|255|200|0|`#FFC800`|
|598|255|197|0|`#FFC500`|
|599|255|193|0|`#FFC100`|
|600|255|190|0|`#FFBE00`|
|601|255|187|0|`#FFBB00`|
|602|255|183|0|`#FFB700`|
|603|255|180|0|`#FFB400`|
|604|255|176|0|`#FFB000`|
|605|255|173|0|`#FFAD00`|
|606|255|169|0|`#FFA900`|
|607|255|166|0|`#FFA600`|
|608|255|162|0|`#FFA200`|
|609|255|159|0|`#FF9F00`|
|610|255|155|0|`#FF9B00`|
|611|255|152|0|`#FF9800`|
|612|255|148|0|`#FF9400`|
|613|255|145|0|`#FF9100`|
|614|255|141|0|`#FF8D00`|
|615|255|137|0|`#FF8900`|
|616|255|134|0|`#FF8600`|
|617|255|130|0|`#FF8200`|
|618|255|126|0|`#FF7E00`|
|619|255|123|0|`#FF7B00`|
|620|255|119|0|`#FF7700`|
|621|255|115|0|`#FF7300`|
|622|255|111|0|`#FF6F00`|
|623|255|107|0|`#FF6B00`|
|624|255|103|0|`#FF6700`|
|625|255|99|0|`#FF6300`|
|626|255|95|0|`#FF5F00`|
|627|255|91|0|`#FF5B00`|
|628|255|87|0|`#FF5700`|
|629|255|83|0|`#FF5300`|
|630|255|79|0|`#FF4F00`|
|631|255|75|0|`#FF4B00`|
|632|255|70|0|`#FF4600`|
|633|255|66|0|`#FF4200`|
|634|255|62|0|`#FF3E00`|
|635|255|57|0|`#FF3900`|
|636|255|52|0|`#FF3400`|
|637|255|48|0|`#FF3000`|
|638|255|43|0|`#FF2B00`|
|639|255|38|0|`#FF2600`|
|640|255|33|0|`#FF2100`|
|641|255|27|0|`#FF1B00`|
|642|255|22|0|`#FF1600`|
|643|255|16|0|`#FF1000`|
|644|255|9|0|`#FF0900`|
|645|255|0|0|`#FF0000`|
|646|255|0|0|`#FF0000`|
|647|255|0|0|`#FF0000`|
|648|255|0|0|`#FF0000`|
|649|255|0|0|`#FF0000`|
|650|255|0|0|`#FF0000`|
|651|255|0|0|`#FF0000`|
|652|255|0|0|`#FF0000`|
|653|255|0|0|`#FF0000`|
|654|255|0|0|`#FF0000`|
|655|255|0|0|`#FF0000`|
|656|255|0|0|`#FF0000`|
|657|255|0|0|`#FF0000`|
|658|255|0|0|`#FF0000`|
|659|255|0|0|`#FF0000`|
|660|255|0|0|`#FF0000`|
|661|255|0|0|`#FF0000`|
|662|255|0|0|`#FF0000`|
|663|255|0|0|`#FF0000`|
|664|255|0|0|`#FF0000`|
|665|255|0|0|`#FF0000`|
|666|255|0|0|`#FF0000`|
|667|255|0|0|`#FF0000`|
|668|255|0|0|`#FF0000`|
|669|255|0|0|`#FF0000`|
|670|255|0|0|`#FF0000`|
|671|255|0|0|`#FF0000`|
|672|255|0|0|`#FF0000`|
|673|255|0|0|`#FF0000`|
|674|255|0|0|`#FF0000`|
|675|255|0|0|`#FF0000`|
|676|255|0|0|`#FF0000`|
|677|255|0|0|`#FF0000`|
|678|255|0|0|`#FF0000`|
|679|255|0|0|`#FF0000`|
|680|255|0|0|`#FF0000`|
|681|255|0|0|`#FF0000`|
|682|255|0|0|`#FF0000`|
|683|255|0|0|`#FF0000`|
|684|255|0|0|`#FF0000`|
|685|255|0|0|`#FF0000`|
|686|255|0|0|`#FF0000`|
|687|255|0|0|`#FF0000`|
|688|255|0|0|`#FF0000`|
|689|255|0|0|`#FF0000`|
|690|255|0|0|`#FF0000`|
|691|255|0|0|`#FF0000`|
|692|255|0|0|`#FF0000`|
|693|255|0|0|`#FF0000`|
|694|255|0|0|`#FF0000`|
|695|255|0|0|`#FF0000`|
|696|255|0|0|`#FF0000`|
|697|255|0|0|`#FF0000`|
|698|255|0|0|`#FF0000`|
|699|255|0|0|`#FF0000`|
|700|255|0|0|`#FF0000`|
|701|253|0|0|`#FD0000`|
|702|251|0|0|`#FB0000`|
|703|250|0|0|`#FA0000`|
|704|248|0|0|`#F80000`|
|705|246|0|0|`#F60000`|
|706|244|0|0|`#F40000`|
|707|242|0|0|`#F20000`|
|708|241|0|0|`#F10000`|
|709|239|0|0|`#EF0000`|
|710|237|0|0|`#ED0000`|
|711|235|0|0|`#EB0000`|
|712|233|0|0|`#E90000`|
|713|232|0|0|`#E80000`|
|714|230|0|0|`#E60000`|
|715|228|0|0|`#E40000`|
|716|226|0|0|`#E20000`|
|717|224|0|0|`#E00000`|
|718|222|0|0|`#DE0000`|
|719|220|0|0|`#DC0000`|
|720|219|0|0|`#DB0000`|
|721|217|0|0|`#D90000`|
|722|215|0|0|`#D70000`|
|723|213|0|0|`#D50000`|
|724|211|0|0|`#D30000`|
|725|209|0|0|`#D10000`|
|726|207|0|0|`#CF0000`|
|727|206|0|0|`#CE0000`|
|728|204|0|0|`#CC0000`|
|729|202|0|0|`#CA0000`|
|730|200|0|0|`#C80000`|
|731|198|0|0|`#C60000`|
|732|196|0|0|`#C40000`|
|733|194|0|0|`#C20000`|
|734|192|0|0|`#C00000`|
|735|190|0|0|`#BE0000`|
|736|188|0|0|`#BC0000`|
|737|186|0|0|`#BA0000`|
|738|185|0|0|`#B90000`|
|739|183|0|0|`#B70000`|
|740|181|0|0|`#B50000`|
|741|179|0|0|`#B30000`|
|742|177|0|0|`#B10000`|
|743|175|0|0|`#AF0000`|
|744|173|0|0|`#AD0000`|
|745|171|0|0|`#AB0000`|
|746|169|0|0|`#A90000`|
|747|167|0|0|`#A70000`|
|748|165|0|0|`#A50000`|
|749|163|0|0|`#A30000`|
|750|161|0|0|`#A10000`|
|751|159|0|0|`#9F0000`|
|752|157|0|0|`#9D0000`|
|753|155|0|0|`#9B0000`|
|754|153|0|0|`#990000`|
|755|151|0|0|`#970000`|
|756|149|0|0|`#950000`|
|757|147|0|0|`#930000`|
|758|145|0|0|`#910000`|
|759|143|0|0|`#8F0000`|
|760|141|0|0|`#8D0000`|
|761|138|0|0|`#8A0000`|
|762|136|0|0|`#880000`|
|763|134|0|0|`#860000`|
|764|132|0|0|`#840000`|
|765|130|0|0|`#820000`|
|766|128|0|0|`#800000`|
|767|126|0|0|`#7E0000`|
|768|124|0|0|`#7C0000`|
|769|122|0|0|`#7A0000`|
|770|119|0|0|`#770000`|
|771|117|0|0|`#750000`|
|772|115|0|0|`#730000`|
|773|113|0|0|`#710000`|
|774|111|0|0|`#6F0000`|
|775|109|0|0|`#6D0000`|
|776|106|0|0|`#6A0000`|
|777|104|0|0|`#680000`|
|778|102|0|0|`#660000`|
|779|100|0|0|`#640000`|
|780|97|0|0|`#610000`|
